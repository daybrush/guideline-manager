/*
Copyright (c) Daybrush
name: @scena/guides
license: MIT
author: Daybrush
repository: git+https://github.com/daybrush/guides.git
version: 0.29.0
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Guides=e()}(this,function(){"use strict";var z=function(t,e){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}z(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function d(e,n){return function(t){t&&(e[n]=t)}}function F(n,r){return function(t){var e=t.prototype;n.forEach(function(t){r(e,t)})}}var Y="function",A="object",X="string",G="undefined",B=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],j=1e-7,i={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return t/100*(e=void 0===e?window.innerWidth:e)},vh:function(t,e){return t/100*(e=void 0===e?window.innerHeight:e)},vmax:function(t,e){return t/100*(e=void 0===e?Math.max(window.innerWidth,window.innerHeight):e)},vmin:function(t,e){return t/100*(e=void 0===e?Math.min(window.innerWidth,window.innerHeight):e)}};function o(t){return t&&typeof t===A}function I(t){return Array.isArray(t)}function m(t){return typeof t===X}function L(t){return typeof t===Y}function $(t,e,n,r,i){if(_(t,e,n))return n;for(var o,s=t,a=e,c=r,u=i,l=n+1;l<c;++l){var f=function(t){var e,n,r=a[t].trim();return r!==s.close||_(s,a,t)?(e=t,-1===(e=(n=E(u,function(t){return t.open===r}))?$(n,a,t,c,u):e)?(o=t,"break"):void(o=t=e)):{value:t}}(l);if(l=o,"object"==typeof f)return f.value;if("break"===f)break}return-1}function _(t,e,n){return t.ignore?(e=e.slice(Math.max(n-3,0),n+3).join(""),new RegExp(t.ignore).exec(e)):null}function y(o,t){var t=m(t)?{separator:t}:t,e=t.separator,s=void 0===e?",":e,a=t.isSeparateFirst,c=t.isSeparateOnlyOpenClose,e=t.isSeparateOpenClose,u=void 0===e?c:e,e=t.openCloseCharacters,l=void 0===e?B:e,t=l.map(function(t){var e=t.open,t=t.close;return e===t?e:e+"|"+t}).join("|"),e=new RegExp("(\\s*"+s+"\\s*|"+t+"|\\s+)","g"),f=o.split(e).filter(function(t){return t&&"undefined"!==t}),h=f.length,d=[],p=[];function v(){return p.length&&(d.push(p.join("")),p=[])}for(var g,n=function(t){var e=f[t].trim(),n=t,r=E(l,function(t){return t.open===e}),i=E(l,function(t){return t.close===e});if(r){if(-1!==(n=$(r,f,t,h,l))&&u)return v()&&a||(d.push(f.slice(t,n+1).join("")),t=n,a)?(g=t,"break"):(g=t,"continue")}else{if(i&&!_(i,f,t))return(r=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(l)).splice(l.indexOf(i),1),{value:y(o,{separator:s,isSeparateFirst:a,isSeparateOnlyOpenClose:c,isSeparateOpenClose:u,openCloseCharacters:r})};if(i=e,!((""!==(r=s)&&" "!=r||""!==i&&" "!=i)&&i!==r||c))return v(),a?(g=t,"break"):(g=t,"continue")}p.push(f.slice(t,(n=-1===n?h-1:n)+1).join("")),g=t=n},r=0;r<h;++r){var i=n(r),r=g;if("object"==typeof i)return i.value;if("break"===i)break}return p.length&&d.push(p.join("")),d}function c(t){return y(t,",")}function Z(t){var e,n,t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);return t?(e=t[1],n=t[2],{prefix:e,unit:t[3],value:parseFloat(n)}):{prefix:"",unit:"",value:NaN}}function x(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(t,e,n){return""+e+r+n.toLowerCase()})}function b(){return Date.now?Date.now():(new Date).getTime()}function W(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function rt(t,e){e=function(t,e,n){void 0===n&&(n=-1);for(var r=t.length-1;0<=r;--r)if(e(t[r],r,t))return r;return n}(t,e);-1<e&&t[e]}function E(t,e,n){e=W(t,e);return-1<e?t[e]:n}function l(t){return Object.keys(t)}function nt(t,e){var t=Z(t),n=t.value,t=t.unit;if(o(e)){var r=e[t];if(r){if(L(r))return r(n);if(i[t])return i[t](n,r)}}else if("%"===t)return n*e/100;return i[t]?i[t](n):n}function N(t,e){var n;return e?(n=1/e,Math.round(t/e)/n):t}function S(t,e,n,r){t.addEventListener(e,n,r)}function w(t,e,n,r){t.removeEventListener(e,n,r)}function a(t){return(null==(t=null==t?void 0:t.ownerDocument)?void 0:t.defaultView)||window}var U=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,i=n.indexOf(t),i=-1===i?n.length:i;n[i]=t,r[i]=e},t}(),q=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),H="function"==typeof Map,V=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var J=function(){function t(t,e,n,r,i,o,s,a){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=s,this.fixed=a}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){t=this.changedBeforeAdded,n=this.fixed,i=[],o=[],t.forEach(function(t){var e=t[0],t=t[1],n=new V;o[t]=i[e]=n}),i.forEach(function(t,e){t.connect(i[e-1])});var n,i,o,t=t.filter(function(t,e){return!n[e]}).map(function(t,e){var n,r=t[0],t=t[1];return r===t?[0,0]:(t=o[t-1],n=(r=i[r]).getIndex(),r.disconnect(),t?r.connect(t,t.next):r.connect(void 0,i[0]),[n,r.getIndex()])}),s=this.changed,a=[];this.cacheOrdered=t.filter(function(t,e){var n=t[0],t=t[1],e=s[e],r=e[0],e=e[1];if(n!==t)return a.push([r,e]),!0}),this.cachePureChanged=a},t}();function K(t,e,n){var r=H?Map:n?q:U,n=n||function(t){return t},i=[],o=[],s=[],a=t.map(n),n=e.map(n),c=new r,u=new r,l=[],f=[],h={},d=[],p=0,v=0;return a.forEach(function(t,e){c.set(t,e)}),n.forEach(function(t,e){u.set(t,e)}),a.forEach(function(t,e){t=u.get(t);void 0===t?(++v,o.push(e)):h[t]=v}),n.forEach(function(t,e){t=c.get(t);void 0===t?(i.push(e),++p):(s.push([t,e]),v=h[e]||0,l.push([t-v,e-p]),f.push(e===t),t!==e&&d.push([t,e]))}),o.reverse(),new J(t,e,i,o,d,s,l,f)}var Q=function(t,e){return(Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Q(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var g=function(){return(g=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function tt(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function et(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function it(t){var e=0;return t.map(function(t){return null==t?"$compat".concat(++e):"".concat(t)})}function ot(t,e){if(e)for(var n in e)typeof t[n]===G&&(t[n]=e[n]);return t}function u(t,e){if(t!==e){for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0}return!1}function st(t){var e=t.className,t=tt(t,["className"]);return null!=e&&(t.class=e),delete t.style,delete t.children,t}function at(t){var e,n={},r={};for(e in t)0===e.indexOf("on")?r[e]=t[e]:n[e]=t[e];return[n,r]}function ct(t){var e;return t?(e=t.b)instanceof Node?e:ct(t.c):null}function ut(t){var e=t.parentNode;e&&e.removeChild(t)}function lt(t){t.forEach(function(t){t()})}function ft(){return this.constructor(this.props,this.context)}var ht=0,t=function(){function t(t,e,n,r,i,o,s){void 0===s&&(s={}),this.t=t,this.d=e,this.k=n,this.i=r,this.c=i,this.ref=o,this.ps=s,this.typ="prov",this._ps=[],this._cs={},this._hyd=null,this._sel=!1}var e=t.prototype;return e.s=function(){return!0},e.u=function(e,n,t,r,i){var o,s=this,a=s.d,c=function e(t){var n=[];return t.forEach(function(t){n=n.concat(I(t)?e(t):t)}),n}(l(o=n).map(function(t){return o[t]}).filter(function(t){return t.$_req}).map(function(t){return t.$_subs})),u=E(c,function(t){return t.d===a});if(s.b&&!m(t)&&!i&&!s.s(t.props,r)&&!u)return c.reduce(function(t,e){var n=e.d;return t[0]?t[0].d===n&&t.push(e):a<n&&t.push(e),t},[]).forEach(function(t){O(t,t._ps,[t.o],e,n,!0)}),!1;s.o=t,s.ss(r);i=s.ps;return m(t)||(s.ps=t.props,s.ref=t.ref),pt(this),s.r(e,n,s.b?i:{},r),!0},e.md=function(){this.rr()},e.ss=function(){},e.ud=function(){this.rr()},e.rr=function(){var t=this.ref,e=this.fr;t&&t(e?e.current:this.b)},t}();function dt(){return Object.__CROACT_CURRENT_INSTNACE__}function pt(t){Object.__CROACT_CURRENT_INSTNACE__=t,ht=0}var vt=function(){function t(t,e){this.props=t=void 0===t?{}:t,this.context=e,this.state={},this.$_timer=0,this.$_state={},this.$_subs=[],this.$_cs={}}var e=t.prototype;return e.render=function(){return null},e.shouldComponentUpdate=function(t,e){return this.props!==t||this.state!==e},e.setState=function(t,e,n){var r=this;r.$_timer||(r.$_state={}),clearTimeout(r.$_timer),r.$_timer=0,r.$_state=g(g({},r.$_state),t),n?r.$_setState(e,n):r.$_timer=window.setTimeout(function(){r.$_timer=0,r.$_setState(e,n)})},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var n=[],r=this.$_p;O(r.c,[r],[r.o],n,r._cs,g(g({},this.state),this.$_state),e)&&(t&&n.push(t),lt(n),pt(null))},t}(),gt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.shouldComponentUpdate=function(t,e){return u(this.props,t)||u(this.state,e)},e}(vt);function mt(t){function e(t){e.current=t}return e.current=t,e}var _t=function(a){function t(t,e,n,r,i,o,s){e=a.call(this,t,e,n,r,i,o,ot(s=void 0===s?{}:s,t.defaultProps))||this;return e.typ="comp",e._usefs=[],e._uefs=[],e._defs=[],e}r(t,a);var e=t.prototype;return e.s=function(t,e){var n=this.b;return!1!==n.shouldComponentUpdate(ot(t,this.t.defaultProps),e||n.state)},e.r=function(t,e,n){var r,i,o,s,a=this,c=a.t,u=(a.ps=ot(a.ps,a.t.defaultProps),a.ps),l=!a.b,f=c.contextType,h=a.b,d=null==f?void 0:f.get(a),p=(a._cs=e,l?(r=u,i=d,o=a,null!=(v=null==(c=c)?void 0:c.prototype)&&v.render?s=new c(r,i):((s=new vt(r,i)).constructor=c)._fr?(o.fr=mt(),s.render=function(){return this.constructor(this.props,o.fr)}):s.render=ft,s.$_p=o,h=s,a.b=h):(h.props=u,h.context=d),h.state),v=(a._usefs=[],a._uefs=[],h.render()),c=(0===(null==(i=null==(r=null==v?void 0:v.props)?void 0:r.children)?void 0:i.length)&&(v.props.children=a.ps.children),g(g({},e),h.$_cs));O(a,a._ps,v?[v]:[],t,c),l?a._uefs.push(function(){null!=f&&f.register(a),h.componentDidMount()}):a._uefs.push(function(){h.componentDidUpdate(n,p)}),t.push(function(){a._usefs.forEach(function(t){t()}),l?a.md():a.ud(),a._defs=a._uefs.map(function(t){return t()})})},e.ss=function(t){var e=this.b;e&&t&&(e.state=t)},e.un=function(){var t,e=this;e._ps.forEach(function(t){t.un()}),null!=(t=e.t.contextType)&&t.unregister(e),clearTimeout(e.b.$_timer),e._defs.forEach(function(t){t&&t()}),e.b.componentWillUnmount()},t}(t);function yt(n,r){var i=l(n),e=l(r),t=K(i,e,function(t){return t}),o={},s={},a={};return t.added.forEach(function(t){t=e[t];o[t]=r[t]}),t.removed.forEach(function(t){t=i[t];s[t]=n[t]}),t.maintained.forEach(function(t){var t=t[0],t=i[t],e=[n[t],r[t]];n[t]!==r[t]&&(a[t]=e)}),{added:o,removed:s,changed:a}}var bt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.typ="elem",t._es={},t._svg=!1,t}r(t,e);var n=t.prototype;return n.e=function(r,t){var i=this,e=i._es,n=i.b,o=r.replace(/^on/g,"").toLowerCase();t?(w(n,o,e[r]),delete e[r]):(e[r]=function(t){var e,n;null!=(n=(e=i.ps)[r])&&n.call(e,t)},S(n,o,e[r]))},n.s=function(t){return u(this.ps,t)},n.r=function(t,e,n){var r,i,o,s=this,a=!s.b,c=s.ps,u=(a&&(u=!1,u=!(!s._svg&&"svg"!==s.t)||(f=ct(s.c))&&f.ownerSVGElement,s._svg=u,f=null==(f=s._hyd)?void 0:f.splice(0,1)[0],l=s.t,f?s._hyd=[].slice.call(f.children||[]):f=u?document.createElementNS("http://www.w3.org/2000/svg",l):document.createElement(l),s.b=f),O(s,s._ps,c.children,t,e),s.b),l=at(n),f=l[0],e=l[1],l=at(c),h=l[0],l=l[1],d=u,p=(f=yt(st(f),st(h))).added,h=f.removed,v=f.changed;for(r in p)d.setAttribute(r,p[r]);for(i in v)d.setAttribute(i,v[i][1]);for(o in h)d.removeAttribute(o);var g,m,h=e,_=s,e=(h=yt(e,e=l)).added;for(g in h.removed)_.e(g,!0);for(m in e)_.e(m);var y,h=n.style||{},e=c.style||{},n=u,b=n.style,E=(n=yt(h,e)).added,h=n.removed,S=n.changed;for(y in E){var w=x(y,"-");b.setProperty(w,E[y])}for(y in S){var C=x(y,"-");b.setProperty(C,S[y][1])}for(y in h){var P=x(y,"-");b.removeProperty(P)}return t.push(function(){a?s.md():s.ud()}),!0},n.un=function(){var t,e=this,n=e._es,r=e.b;for(t in n)w(r,t,n[t]);e._ps.forEach(function(t){t.un()}),e._es={},e._sel||ut(r)},t}(t);function v(t){return!t||t instanceof Node?t:(t=t.$_p._ps).length?v(t[0].b):null}function C(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var e=e||{},i=e.key,o=e.ref,e=tt(e,["key","ref"]);return{type:t,key:i,ref:o,props:g(g({},e),{children:n.reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return null!=t&&!1!==t})})}}var Et=function(n){function t(t,e){e=n.call(this,"container",e=void 0===e?0:e,"container",0,null)||this;return e.typ="container",e.b=t,e}r(t,n);var e=t.prototype;return e.r=function(){return!0},e.un=function(){},t}(t),St=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.typ="text",t}r(t,e);var n=t.prototype;return n.r=function(t){var e,n=this,r=!n.b;return r&&(e=null==(e=n._hyd)?void 0:e.splice(0,1)[0],n.b=e||document.createTextNode(n.t.replace("text_",""))),t.push(function(){r?n.md():n.ud()}),!0},n.un=function(){ut(this.b)},t}(t);function wt(t,e,n,r){var i,o=r.d+1;return m(t)||"number"==typeof t?new St("text_".concat(t),o,e,n,r,null,{}):new("string"==typeof(i=t.type)?bt:_t)(i,o,e,n,r,t.ref,t.props)}function O(n,r,i,o,s,a,c){u=n,l=r,h=(f=i).map(function(t){return m(t)?null:t.key}),(t=K(it(l.map(function(t){return t.k})),it(h),function(t){return t})).removed.forEach(function(t){l.splice(t,1)[0].un()}),t.ordered.forEach(function(t){var e=t[0],t=t[1],e=l.splice(e,1)[0],e=(l.splice(t,0,e),v(e.b)),t=v(l[t+1]&&l[t+1].b);e&&e.parentNode.insertBefore(e,t)}),t.added.forEach(function(t){l.splice(t,0,wt(f[t],h[t],t,u))}),e=t.maintained.filter(function(t){t[0];var t=t[1],e=f[t],n=l[t];return(m(e)?"text_".concat(e):e.type)!==n.t?(n.un(),l.splice(t,1,wt(e,h[t],t,u)),!0):(n.i=t,!1)});var u,l,f,h,t=et(et([],t.added,!0),e.map(function(t){return t[0],t[1]}),!0),d=n._hyd,e=r.filter(function(t,e){return t._hyd=d,t.u(o,s,i[e],a,c)}),p=("container"===n.typ&&n._sel&&r.forEach(function(t){t=function t(e){if(e)return e.b&&e.b instanceof Node?e:(e=e._ps).length?t(e[0]):null}(t);t&&(t._sel=!0)}),n._hyd=null,ct(n));return p&&t.reverse().forEach(function(t){var t=r[t],e=v(t.b);e&&p!==e&&!e.parentNode&&(t=function(t,e){for(var n=t._ps,r=n.length,i=e.i+1;i<r;++i){var o=v(n[i].b);if(o)return o}return null}(n,t),p.insertBefore(e,t))}),0<e.length}function Ct(t,e,n){var r,i,o,s;return!n&&t&&((n=new Et(e.parentElement))._hyd=[e],n._sel=!0),t=t,e=e,void 0===i&&(i={}),o=!!(r=void 0===(r=n)?e.__CROACT__:r),s=[],O(r=r||new Et(e),r._ps,t?[t]:[],s,i,void 0,void 0),lt(s),pt(null),o||(e.__CROACT__=r),n}function Pt(t){var e=dt(),e=e._hs||(e._hs=[]),n=ht,r=e[n];if(ht=n+1,r){if(!u(r.deps,t.deps))return r.updated=!1,r;e[n]=t}else e.push(t);return t.value=t.func(),t.updated=!0,t}function xt(t){return Pt({func:function(){return mt(t)},deps:[]}).value}function Ot(t,e,n){var r=dt(),i=Pt({func:function(){return t},deps:e}),e=n?r._usefs:r._uefs;i.updated?e.push(function(){return i.effect&&i.effect(),i.effect=t(),i.effect}):e.push(function(){return i.effect})}var Dt=function(t,e){return(Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var kt=function(e){var t=i,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={scrollPos:0},t.width=0,t.height=0,t._zoom=0,t._rulerScale=0,t._observer=null,t._checkResize=function(){t.resize()},t}Dt(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r);n=i.prototype;return n.render=function(){var t=this.props;return this._zoom=t.zoom,C("canvas",{ref:d(this,"canvasElement"),style:this.props.style})},n.componentDidMount=function(){var t=this.props,e=(this.state.scrollPos=t.defaultScrollPos||0,this.canvasElement),n=e.getContext("2d",{alpha:!0});this.canvasContext=n,t.useResizeObserver?(this._observer=new ResizeObserver(this._checkResize),this._observer.observe(e,{box:"border-box"})):this.resize()},n.componentDidUpdate=function(){this.resize()},n.componentWillUnmount=function(){var t;this.state.scrollPos=0,null!=(t=this._observer)&&t.disconnect()},n.getScrollPos=function(){return this.state.scrollPos},n.scroll=function(t,e){this.draw({scrollPos:t,zoom:e})},n.resize=function(t){var e=this.canvasElement,n=this.props,r=n.width,i=n.height,n=n.scrollPos,o=this._getRulerScale();this.width=r||e.offsetWidth,this.height=i||e.offsetHeight,e.width=this.width*o,e.height=this.height*o,this.draw({scrollPos:n,zoom:t})},n.draw=function(t){var e=this.props,n=(t=void 0===t?{}:t).zoom,u=void 0===n?this._zoom:n,n=t.scrollPos,l=void 0===n?this.state.scrollPos:n,n=t.marks,n=void 0===n?e.marks:n,r=t.selectedRanges,r=void 0===r?e.selectedRanges:r,i=t.segment,o=void 0===i?e.segment||10:i,i=t.unit,f=void 0===i?e.unit:i;this._zoom=u;var t=e.type,i=e.backgroundColor,N=e.lineColor,Y=e.textColor,A=e.textBackgroundColor,h=e.direction,s=e.negativeRuler,X=void 0===s||s,a=e.textFormat,s=e.range,d=void 0===s?[-1/0,1/0]:s,s=e.rangeBackgroundColor,G=e.selectedBackgroundColor,c=e.lineWidth,c=void 0===c?1:c,B=e.selectedRangesText,p=e.selectedRangesTextColor,I=void 0===p?"#44aaff":p,p=e.selectedRangesTextOffset,L=void 0===p?[0,0]:p,p=e.markColor,p=void 0===p?"#ff5":p,v=this._getRulerScale(),g=this.width,m=this.height,_=(this.state.scrollPos=l,this.canvasContext),y="horizontal"===t,$=!1!==X,t=e.font||"10px sans-serif",b=e.textAlign||"left",Z=e.textOffset||[0,0],E=y?m:g,S=nt("".concat(e.mainLineSize||"100%"),E),W=nt("".concat(e.longLineSize||10),E),U=nt("".concat(e.shortLineSize||7),E),w=e.lineOffset||[0,0];switch("transparent"===i?_.clearRect(0,0,g*v,m*v):(_.rect(0,0,g*v,m*v),_.fillStyle=i,_.fill()),_.save(),_.scale(v,v),_.strokeStyle=N,_.lineWidth=c,_.font=t,_.fillStyle=Y,_.textAlign=b,h){case"start":_.textBaseline="top";break;case"center":_.textBaseline="middle";break;case"end":_.textBaseline="bottom"}_.translate(.5,0),_.beginPath();for(var C=y?g:m,P=u*f,x=Math.floor(l*u/P),q=Math.ceil((l*u+C)/P)-x,H=Math.max(["left","center","right"].indexOf(b)-1,-1),O=y?m:g,D=[],k=0;k<=q;++k){var T=(k+x)*f,V="".concat(T),J=(a&&(V=a(T)),_.measureText(V).width);D.push({color:Y,offset:Z,backgroundColor:A,value:T,text:V,textSize:J})}"transparent"!==G&&null!=r&&r.length&&r.forEach(function(t){var e=Math.max(t[0],d[0],X?-1/0:0),n=Math.min(t[1],d[1]),r=(e-l)*u,n=(n-e)*u;B&&t.forEach(function(t){var e="".concat(t),n=(a&&(e=a(t)),_.measureText(e).width),r=t*u,i=r+n;rt(D,function(t,e){var n=t.value,t=t.textSize,n=n*u;n<=i&&r<=n+t&&D.splice(e,1)}),D.push({value:t,color:I,offset:L,text:e,textSize:n})}),n<=0||(_.save(),_.fillStyle=G,y?_.fillRect(r,0,n,O):_.fillRect(0,r,O,n),_.restore())}),"transparent"!==s&&d[0]!==-1/0&&d[1]!==1/0&&(e=(d[0]-l)*u,i=(d[1]-d[0])*u,_.save(),_.fillStyle=s,y?_.fillRect(e,0,i,O):_.fillRect(0,e,O,i),_.restore());for(k=0;k<=q;++k){T=k+x;if($||!(T<0))for(var K=T*f,Q=(K-l)*u,M=0;M<o;++M){var R=Q+M/o*P,z=K+M/o*f;if(!(R<0||C<=R||z<d[0]||z>d[1])){var F=0===M?S:M%2==0?W:U,j=0;switch(h){case"start":j=0;break;case"center":j=O/2-F/2;break;case"end":j=O-F}var z=y?[R+w[0],j+w[1]]:[j+w[0],R+w[1]],R=z[0],z=z[1],tt=y?[R,z+F]:[R+F,z],et=tt[0],tt=tt[1];_.moveTo(R+w[0],z+w[1]),_.lineTo(et+w[0],tt+w[1])}}}_.stroke(),_.beginPath(),_.strokeStyle=p,_.lineWidth=1,(n||[]).forEach(function(t){var e,n,r=(-l+t)*u;r<0||C<=r||t<d[0]||t>d[1]||(r=(t=y?[r+w[0],w[1]]:[w[0],r+w[1]])[0],t=t[1],e=(n=y?[r,t+E]:[r+E,t])[0],n=n[1],_.moveTo(r+w[0],t+w[1]),_.lineTo(e+w[0],n+w[1]))}),_.stroke(),D.forEach(function(t){var e=t.value,n=t.offset,r=t.backgroundColor,i=t.color,o=t.text,s=t.textSize;if($||!(e<0)){t=(e-l)*u;if(!(t<-P||C+f*u<=t||e<d[0]||e>d[1])){var a=0;switch(h){case"start":a=17;break;case"center":a=O/2;break;case"end":a=O-17}e=y?[t+-3*H,a]:[a,t+3*H],t=e[0],e=e[1];if(r){var c=0;switch(b){case"left":c=0;break;case"center":c=-s/2;break;case"right":c=-s}_.save(),_.fillStyle=r,y?_.fillRect(t+n[0]+c,0,s,S):(_.translate(0,e+n[1]),_.rotate(-Math.PI/2),_.fillRect(c,0,s,S)),_.restore()}_.save(),_.fillStyle=i,y?_.fillText(o,t+n[0],e+n[1]):(_.translate(t+n[0],e+n[1]),_.rotate(-Math.PI/2),_.fillText(o,0,0)),_.restore()}}}),_.restore()},n._getRulerScale=function(){var t,e,n=this.props.defaultPixelScale||2;return this._rulerScale||(!(e=1<window.devicePixelRatio)&&window.matchMedia&&(e=(t=window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)"))&&t.matches),this._rulerScale=e?3:n),this._rulerScale},i.defaultProps={type:"horizontal",zoom:1,width:0,height:0,unit:50,negativeRuler:!0,mainLineSize:"100%",longLineSize:10,shortLineSize:7,segment:10,direction:"end",style:{width:"100%",height:"100%"},backgroundColor:"#333333",font:"10px sans-serif",textColor:"#ffffff",textBackgroundColor:"transparent",lineColor:"#777777",range:[-1/0,1/0],rangeBackgroundColor:"transparent",lineWidth:1,selectedBackgroundColor:"#555555",defaultScrollPos:0,markColor:"#f55",marks:[]},i}(gt),Tt=["type","width","height","unit","zoom","direction","textAlign","font","segment","mainLineSize","longLineSize","shortLineSize","lineOffset","textOffset","negativeRuler","range","scrollPos","defaultScrollPos","style","backgroundColor","rangeBackgroundColor","lineColor","textColor","textBackgroundColor","textFormat","warpSelf","selectedBackgroundColor","selectedRanges","defaultPixelScale","useResizeObserver","selectedRangesText","selectedRangesTextColor","selectedRangesTextOffset","marks","markColor"],Mt=function(){return(Mt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var t=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(o(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(o(t))for(var n in t)this.off(n);else{var r,i;e?(r=this._events[t])&&-1<(i=W(r,function(t){return t.listener===e}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},e.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},e.emit=function(e,n){var t,r=this,i=(void 0===n&&(n={}),this._events[e]);return!e||!i||(t=!1,n.eventType=e,n.stop=function(){t=!0},n.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(i).forEach(function(t){t.listener(n),t.once&&r.off(e,t.listener)}),!t)},e.trigger=function(t,e){return this.emit(t,e=void 0===e?{}:e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(Mt({listener:e},n))},t}(),Rt=function(t,e){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var f=function(){return(f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function zt(t){t=t.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function Ft(t){return t?m(t)?document.querySelector(t):L(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}var jt=function(e){function t(){this.constructor=n}var n;function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._startRect=null,t._startPos=[],t._prevTime=0,t._timer=0,t._prevScrollPos=[0,0],t._isWait=!1,t._flag=!1,t}Rt(n=r,i=e),n.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t);var i=r.prototype;return i.dragStart=function(t,e){var n,r,i,o,s=Ft(e.container);s?(o=i=r=n=0,o=s===document.body?(i=window.innerWidth,window.innerHeight):(n=(s=s.getBoundingClientRect()).top,r=s.left,i=s.width,s.height),this._flag=!0,this._startPos=[t.clientX,t.clientY],this._startRect={top:n,left:r,width:i,height:o},this._prevScrollPos=this._getScrollPosition([0,0],e)):this._flag=!1},i.drag=function(t,e){var n,r,i,o,s,a;if(clearTimeout(this._timer),this._flag)return n=t.clientX,r=t.clientY,i=e.threshold,o=this._startRect,s=this._startPos,a=[0,0],o.top>r-(i=void 0===i?0:i)?(s[1]>o.top||r<s[1])&&(a[1]=-1):o.top+o.height<r+i&&(s[1]<o.top+o.height||r>s[1])&&(a[1]=1),o.left>n-i?(s[0]>o.left||n<s[0])&&(a[0]=-1):o.left+o.width<n+i&&(s[0]<o.left+o.width||n>s[0])&&(a[0]=1),!(!a[0]&&!a[1])&&this._continueDrag(f(f({},e),{direction:a,inputEvent:t,isDrag:!0}))},i.checkScroll=function(t){var e,n,r,i,o,s,a,c=this;return!this._isWait&&(s=void 0===(s=t.prevScrollPos)?this._prevScrollPos:s,a=t.direction,e=void 0===(e=t.throttleTime)?0:e,n=t.inputEvent,r=t.isDrag,o=(i=this._getScrollPosition(a||[0,0],t))[0]-s[0],s=i[1]-s[1],a=a||[o?Math.abs(o)/o:0,s?Math.abs(s)/s:0],this._prevScrollPos=i,!(!o&&!s)&&(this.trigger("move",{offsetX:a[0]?o:0,offsetY:a[1]?s:0,inputEvent:n}),e&&r&&(clearTimeout(this._timer),this._timer=window.setTimeout(function(){c._continueDrag(t)},e)),!0))},i.dragEnd=function(){this._flag=!1,clearTimeout(this._timer)},i._getScrollPosition=function(t,e){var n=e.container,e=e.getScrollPosition;return(void 0===e?zt:e)({container:Ft(n),direction:t})},i._continueDrag=function(t){var e=this,n=t.container,r=t.direction,i=t.throttleTime,o=t.useScroll,s=t.isDrag,a=t.inputEvent;if(!(!this._flag||s&&this._isWait)){var c=b(),i=Math.max(i+this._prevTime-c,0);if(0<i)return clearTimeout(this._timer),this._timer=window.setTimeout(function(){e._continueDrag(t)},i),!1;this._prevTime=c;i=this._getScrollPosition(r,t),c=(this._prevScrollPos=i,s&&(this._isWait=!0),{container:Ft(n),direction:r,inputEvent:a});return null!=(s=t.requestScroll)&&s.call(t,c),this.trigger("scroll",c),this._isWait=!1,o||this.checkScroll(f(f({},t),{prevScrollPos:i,direction:r,inputEvent:a}))}},r}(t),Nt=function(t,e){return(Nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var P=function(){return(P=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Yt(t){return 180*(e=[t[0].clientX,t[0].clientY],t=[t[1].clientX,t[1].clientY],n=t[0]-e[0],t=t[1]-e[1],(0<=(e=Math.atan2(t,n))?e:e+2*Math.PI)/Math.PI);var e,n}function D(t){if(!t)return[];if(t.touches){for(var e=t.touches,n=Math.min(e.length,2),r=[],i=0;i<n;++i)r.push(Gt(e[i]));return r}return[Gt(t)]}function At(t,e,n){var r=n.length,t=h(t,r),i=t.clientX,o=t.clientY,s=t.originalClientX,t=t.originalClientY,e=h(e,r),a=e.clientX,e=e.clientY,n=h(n,r);return{clientX:s,clientY:t,deltaX:i-a,deltaY:o-e,distX:i-n.clientX,distY:o-n.clientY}}function Xt(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Gt(t){return{clientX:t.clientX,clientY:t.clientY}}function h(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var Bt=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return t.prototype.getAngle=function(t){return Yt(t=void 0===t?this.prevClients:t)},t.prototype.getRotation=function(t){return Yt(t=void 0===t?this.prevClients:t)-Yt(this.startClients)},t.prototype.getPosition=function(t,e){var n=At((t=void 0===t?this.prevClients:t)||this.prevClients,this.prevClients,this.startClients),r=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(r*r+i*i),this.prevClients=t,n},t.prototype.getPositions=function(n){void 0===n&&(n=this.prevClients);var r=this.prevClients;return this.startClients.map(function(t,e){return At([n[e]],[r[e]],[t])})},t.prototype.getMovement=function(t){var e,n,r=this.movement;return t?(t=h(t,this.length),e=h(this.prevClients,this.length),n=t.clientX-e.clientX,t=t.clientY-e.clientY,Math.sqrt(n*n+t*t)+r):r},t.prototype.getDistance=function(t){return Xt(t=void 0===t?this.prevClients:t)},t.prototype.getScale=function(t){return Xt(t=void 0===t?this.prevClients:t)/Xt(this.startClients)},t.prototype.move=function(e,n){this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n}),this.prevClients.forEach(function(t){t.clientX-=e,t.clientY-=n})},t}(),It=["textarea","input"],Lt=function(o){function t(){this.constructor=e}var e,n;function r(t,e){void 0===e&&(e={});var n,g=o.call(this)||this,t=(g.options={},g.flag=!1,g.pinchFlag=!1,g.data={},g.isDrag=!1,g.isPinch=!1,g.isMouse=!1,g.isTouch=!1,g.clientStores=[],g.targets=[],g.prevTime=0,g.doubleFlag=!1,g._dragFlag=!1,g._isTrusted=!1,g._isMouseEvent=!1,g._isSecondaryButton=!1,g._preventMouseEvent=!1,g._prevInputEvent=null,g._isDragAPI=!1,g._isIdle=!0,g._window=window,g.onDragStart=function(t,e){if(void 0===e&&(e=!0),g.flag||!1!==t.cancelable){var n=-1<=t.type.indexOf("drag");if(!g.flag||!n){g._isDragAPI=!0;var n=g.options,r=n.container,i=n.pinchOutside,o=n.preventWheelClick,s=n.preventRightClick,a=n.preventDefault,c=n.checkInput,u=n.dragFocusedInput,l=n.preventClickEventOnDragStart,f=n.preventClickEventOnDrag,n=n.preventClickEventByCondition,h=g.isTouch,d=!g.flag;if(g._isSecondaryButton=3===t.which||2===t.button,o&&(2===t.which||1===t.button)||s&&(3===t.which||2===t.button))return g.stop(),!1;if(d){o=g._window.document.activeElement,s=t.target;if(s){var p=s.tagName.toLowerCase(),p=-1<It.indexOf(p),v=s.isContentEditable;if(p||v){if(c||!u&&o===s)return!1;if(o&&(o===s||v&&o.isContentEditable&&o.contains(s))){if(!u)return!1;s.blur()}}else(a||"touchstart"===t.type)&&o&&(p=o.tagName.toLowerCase(),(o.isContentEditable||-1<It.indexOf(p))&&o.blur());(l||f||n)&&S(g._window,"click",g._onClick,!0)}g.clientStores=[new Bt(D(t))],g._isIdle=!1,g.flag=!0,g.isDrag=!1,g._isTrusted=e,g._dragFlag=!0,g._prevInputEvent=t,g.data={},g.doubleFlag=b()-g.prevTime<200,g._isMouseEvent=(c=t)&&(-1<c.type.indexOf("mouse")||"button"in c),!g._isMouseEvent&&g._preventMouseEvent&&(g._preventMouseEvent=!1),!1===(g._preventMouseEvent||g.emit("dragStart",P(P({data:g.data,datas:g.data,inputEvent:t,isMouseEvent:g._isMouseEvent,isSecondaryButton:g._isSecondaryButton,isTrusted:e,isDouble:g.doubleFlag},g.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){g._dragFlag=!1}})))&&g.stop(),g._isMouseEvent&&g.flag&&a&&t.preventDefault()}if(!g.flag)return!1;v=0;d?(g._attchDragEvent(),h&&i&&(v=setTimeout(function(){S(r,"touchstart",g.onDragStart,{passive:!1})}))):h&&i&&w(r,"touchstart",g.onDragStart),g.flag&&((u=t).touches&&2<=u.touches.length)&&(clearTimeout(v),d&&t.touches.length!==t.changedTouches.length||g.pinchFlag||g.onPinchStart(t))}}},g.onDrag=function(t,e){if(g.flag){var n=g.options.preventDefault,n=(!g._isMouseEvent&&n&&t.preventDefault(),D(g._prevInputEvent=t)),r=g.moveClients(n,t,!1);if(g._dragFlag){if(g.pinchFlag||r.deltaX||r.deltaY)if(!1===(g._preventMouseEvent||g.emit("drag",P(P({},r),{isScroll:!!e,inputEvent:t}))))return void g.stop();g.pinchFlag&&g.onPinch(t,n)}g.getCurrentStore().getPosition(n,!0)}},g.onDragEnd=function(t){var e,n,r,i,o,s;g.flag&&(s=(r=g.options).pinchOutside,e=r.container,o=r.preventClickEventOnDrag,i=r.preventClickEventOnDragStart,r=r.preventClickEventByCondition,n=g.isDrag,(o||i||r)&&requestAnimationFrame(function(){g._allowClickEvent()}),r||i||!o||n||g._allowClickEvent(),g.isTouch&&s&&w(e,"touchstart",g.onDragStart),g.pinchFlag&&g.onPinchEnd(t),0!==(r=null!=t&&t.touches?D(t):[]).length&&g.options.keepDragging?g._addStore(new Bt(r)):g.flag=!1,i=g._getPosition(),o=b(),s=!n&&g.doubleFlag,g._prevInputEvent=null,g.prevTime=n||s?0:o,g.flag||(g._dettachDragEvent(),g._preventMouseEvent||g.emit("dragEnd",P({data:g.data,datas:g.data,isDouble:s,isDrag:n,isClick:!n,isMouseEvent:g._isMouseEvent,isSecondaryButton:g._isSecondaryButton,inputEvent:t,isTrusted:g._isTrusted},i)),g.clientStores=[],g._isMouseEvent||(g._preventMouseEvent=!0,requestAnimationFrame(function(){requestAnimationFrame(function(){g._preventMouseEvent=!1})})),g._isIdle=!0))},g.onBlur=function(){g.onDragEnd()},g._allowClickEvent=function(){w(g._window,"click",g._onClick,!0)},g._onClick=function(t){g._allowClickEvent(),g._preventMouseEvent=!1;var e=g.options.preventClickEventByCondition;null!=e&&e(t)||(t.stopPropagation(),t.preventDefault())},g._onContextMenu=function(t){g.options.preventRightClick?g.onDragEnd(t):t.preventDefault()},g._passCallback=function(){},[].concat(t)),r=t[0],r=(g._window=!r||"document"in r?window:a(r),g.options=P({checkInput:!1,container:!r||"document"in r?r:a(r),preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},e),g.options),e=r.container,i=r.events,r=r.checkWindowBlur;return g.isTouch=-1<i.indexOf("touch"),g.isMouse=-1<i.indexOf("mouse"),g.targets=t,g.isMouse&&(t.forEach(function(t){S(t,"mousedown",g.onDragStart),S(t,"mousemove",g._passCallback)}),S(e,"contextmenu",g._onContextMenu)),r&&S(a(),"blur",g.onBlur),g.isTouch&&(n={passive:!1},t.forEach(function(t){S(t,"touchstart",g.onDragStart,n),S(t,"touchmove",g._passCallback,n)})),g}return Nt(e=r,n=o),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t),r.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._isIdle=!0,this._allowClickEvent(),this._dettachDragEvent(),this._isDragAPI=!1},r.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},r.prototype.isDragging=function(){return this.isDrag},r.prototype.isIdle=function(){return this._isIdle},r.prototype.isFlag=function(){return this.flag},r.prototype.isPinchFlag=function(){return this.pinchFlag},r.prototype.isDoubleFlag=function(){return this.doubleFlag},r.prototype.isPinching=function(){return this.isPinch},r.prototype.scrollBy=function(t,e,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r&&this.onDrag(n,!0))},r.prototype.move=function(t,e){var n=t[0],r=t[1],t=this.getCurrentStore().prevClients;return this.moveClients(t.map(function(t){var e=t.clientX,t=t.clientY;return{clientX:e+n,clientY:t+r,originalClientX:e,originalClientY:t}}),e,!0)},r.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},r.prototype.setEventData=function(t){var e,n=this.data;for(e in t)n[e]=t[e];return this},r.prototype.setEventDatas=function(t){return this.setEventData(t)},r.prototype.getCurrentEvent=function(t){return void 0===t&&(t=this._prevInputEvent),P(P({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},r.prototype.getEventData=function(){return this.data},r.prototype.getEventDatas=function(){return this.data},r.prototype.unset=function(){var e=this,t=this.targets,n=this.options.container;this.off(),w(this._window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){w(t,"mousedown",e.onDragStart)}),w(n,"contextmenu",this._onContextMenu)),this.isTouch&&(t.forEach(function(t){w(t,"touchstart",e.onDragStart)}),w(n,"touchstart",this.onDragStart)),this._prevInputEvent=null,this._allowClickEvent(),this._dettachDragEvent()},r.prototype.onPinchStart=function(t){var e=this,n=this.options.pinchThreshold;this.isDrag&&this.getMovement()>n||(n=new Bt(D(t)),this.pinchFlag=!0,this._addStore(n),!1===this.emit("pinchStart",P(P({data:this.data,datas:this.data,angle:n.getAngle(),touches:this.getCurrentStore().getPositions()},n.getPosition()),{inputEvent:t,isTrusted:this._isTrusted,preventDefault:function(){t.preventDefault()},preventDrag:function(){e._dragFlag=!1}}))&&(this.pinchFlag=!1))},r.prototype.onPinch=function(t,e){var n;!this.flag||!this.pinchFlag||e.length<2||(n=this.getCurrentStore(),this.isPinch=!0,this.emit("pinch",P(P({data:this.data,datas:this.data,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e)),{inputEvent:t,isTrusted:this._isTrusted})))},r.prototype.onPinchEnd=function(t){var e,n;this.pinchFlag&&(e=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,n=this.getCurrentStore(),this.emit("pinchEnd",P(P({data:this.data,datas:this.data,isPinch:e,touches:n.getPositions()},n.getPosition()),{inputEvent:t})))},r.prototype.getCurrentStore=function(){return this.clientStores[0]},r.prototype.moveClients=function(t,e,n){var n=this._getPosition(t,n),r=this.isDrag,i=((n.deltaX||n.deltaY)&&(this.isDrag=!0),!1);return!r&&this.isDrag&&(i=!0),P(P({data:this.data,datas:this.data},n),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e,isTrusted:this._isTrusted,isFirstDrag:i})},r.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},r.prototype._getPosition=function(t,e){var t=this.getCurrentStore().getPosition(t,e),e=this.clientStores.slice(1).reduce(function(t,e){e=e.getPosition();return t.distX+=e.distX,t.distY+=e.distY,t},t),n=e.distX,e=e.distY;return P(P({},t),{distX:n,distY:e})},r.prototype._attchDragEvent=function(){var t=this.options.container,e={passive:!1};this._isDragAPI&&(S(t,"dragover",this.onDrag),S(t,"dragend",this.onDragEnd)),this.isMouse&&(S(t,"mousemove",this.onDrag),S(t,"mouseup",this.onDragEnd)),this.isTouch&&(S(t,"touchmove",this.onDrag,e),S(t,"touchend",this.onDragEnd,e),S(t,"touchcancel",this.onDragEnd,e))},r.prototype._dettachDragEvent=function(){var t=this.options.container;this._isDragAPI&&(w(t,"dragover",this.onDrag),w(t,"dragend",this.onDragEnd)),this.isMouse&&(w(t,"mousemove",this.onDrag),w(t,"mouseup",this.onDragEnd)),this.isTouch&&(w(t,"touchstart",this.onDragStart),w(t,"touchmove",this.onDrag),w(t,"touchend",this.onDragEnd),w(t,"touchcancel",this.onDragEnd))},r}(t);var $t=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function Zt(t,e,n,r,i){var o,s=document.createElement("style"),e=(s.setAttribute("type","text/css"),s.setAttribute("data-styled-id",t),s.setAttribute("data-styled-count","1"),n.nonce&&s.setAttribute("nonce",n.nonce),s.innerHTML=(o=t,t=e,n.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,e){e=e.trim();return(e?c(e):[""]).map(function(t){t=t.trim();return 0===t.indexOf("@")?t:-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?"".concat(t.replace(/\:host/g,".".concat(o))):t?".".concat(o," ").concat(t):".".concat(o)}).join(", ")+" {"})),r.ownerDocument||document);return(i||e.head||e.body).appendChild(s),s}function Wt(o){var s="rCS"+$t(o).toString(36);return{className:s,inject:function(t,e){void 0===e&&(e={});var n,r=function(t){if(t&&t.getRootNode){t=t.getRootNode();if(11===t.nodeType)return t}}(t),i=(r||t.ownerDocument||document).querySelector('style[data-styled-id="'.concat(s,'"]'));return i?(n=parseFloat(i.getAttribute("data-styled-count"))||0,i.setAttribute("data-styled-count","".concat(n+1))):i=Zt(s,o,e,t,r),{destroy:function(){var t,e=parseFloat(i.getAttribute("data-styled-count"))||0;e<=1?(i.remove?i.remove():null!=(t=i.parentNode)&&t.removeChild(i),i=null):i.setAttribute("data-styled-count","".concat(e-1))}}}}}var Ut=function(){return(Ut=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function p(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,o=e.length/i;if(!i)return e;if(!o)return t;for(var s=0;s<n;++s)for(var a=0;a<o;++a)for(var c=r[a*n+s]=0;c<i;++c)r[a*n+s]+=t[c*n+s]*e[a*i+c];return r}function qt(t,e){return p(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Ht(t,e){return p(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Vt(t,e){return p(t,(t=e,e=4,n=Math.cos(t),t=Math.sin(t),(r=Qt(e))[0]=n,r[1]=t,r[e]=-t,r[e+1]=n,r));var n,r}function k(t,e){var n=e[0],r=e[1],e=e[2];return p(t,[void 0===n?1:n,0,0,0,0,void 0===r?1:r,0,0,0,0,void 0===e?1:e,0,0,0,0,1],4)}function Jt(t,e){var n=e[0],r=e[1],e=e[2];return p(t,[1,0,0,0,0,1,0,0,0,0,1,0,void 0===n?0:n,void 0===r?0:r,void 0===e?0:e,1],4)}function Kt(t,e){return p(t,e,4)}function Qt(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function te(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ee(t){return t=(I(t=t)?t:function(t){return y(t,"")}(t)).map(function(t){var e,n,r,t=!(t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t=t))||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]},i=t.prefix,t=t.value,o=null,s=i,a="";return"translate"===i||"translateX"===i||"translate3d"===i?(o=Jt,a=[(r=c(t).map(function(t){return parseFloat(t)}))[0],void 0===(e=r[1])?0:e,void 0===(e=r[2])?0:e]):"translateY"===i?(o=Jt,a=[0,parseFloat(t),0]):"translateZ"===i?(o=Jt,a=[0,0,parseFloat(t)]):"scale"===i||"scale3d"===i?(o=k,a=[n=(r=c(t).map(function(t){return parseFloat(t)}))[0],void 0===(e=r[1])?n:e,void 0===(e=r[2])?1:e]):"scaleX"===i?(o=k,a=[n=parseFloat(t),1,1]):"scaleY"===i?(o=k,a=[1,parseFloat(t),1]):"scaleZ"===i?(o=k,a=[1,1,parseFloat(t)]):"rotate"===i||"rotateZ"===i||"rotateX"===i||"rotateY"===i?(e=(r=Z(t)).unit,n=r.value,"rotate"===i||"rotateZ"===i?(s="rotateZ",o=Vt):"rotateX"===i?o=qt:"rotateY"===i&&(o=Ht),a="rad"===e?n:n*Math.PI/180):"matrix3d"===i?(o=Kt,a=c(t).map(function(t){return parseFloat(t)})):"matrix"===i?(o=Kt,a=[(r=c(t).map(function(t){return parseFloat(t)}))[0],r[1],0,0,r[2],r[3],0,0,0,0,1,0,r[4],r[5],0,1]):s="",{name:i,functionName:s,value:t,matrixFunction:o,functionValue:a}}),n=te(),t.forEach(function(t){var e=t.matrixFunction,t=t.functionValue;e&&(n=e(n,t))}),n;var n}function ne(t,e){n=t,e=[e[0],e[1]||0,e[2]||0,1],r=(n=p(t,e,t=void 0===(t=4)?e.length:t))[t-1];var n,r,e=n.map(function(t){return t/r}),t=e[3]||1;return[e[0]/t,e[1]/t,e[2]/t]}function re(t,e){void 0===e&&(e=document.body);for(var n=t,r=te();n;){r=Kt(ee(getComputedStyle(n).transform),r);if(n===e)break;n=n.parentElement}return(r=function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=Qt(e),i=0;i<e;++i){var o=e*i+i;if(!N(n[o],j))for(var s=i+1;s<e;++s)if(n[e*i+s]){g=v=p=d=h=f=l=u=c=a=void 0;for(var a=n,c=r,u=i,l=s,f=e,h=0;h<f;++h){var d=u+h*f,p=l+h*f,v=a[d],g=c[d];a[d]=a[p],a[p]=v,c[d]=c[p],c[p]=g}break}if(!N(n[o],j))return[];w=S=E=b=y=_=m=void 0;for(var m=n,_=r,y=i,b=e,E=n[o],S=0;S<b;++S){var w=y+S*b;m[w]/=E,_[w]/=E}for(s=0;s<e;++s){var C=s,P=n[s+i*e];if(N(P,j)&&i!==s){F=z=R=M=T=k=D=O=x=void 0;for(var x=n,O=r,D=C,k=i,T=e,M=-P,R=0;R<T;++R){var z=D+R*T,F=k+R*T;x[z]+=x[F]*M,O[z]+=O[F]*M}}}}return r}(r,4))[12]=0,r[13]=0,r[14]=0,r}var ie=function(t,e){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var T=function(){return(T=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function M(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function R(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}.apply(void 0,M(["scena-guides-"],t,!1))}var oe,se,ae,ce,ue,le=R("guide","adder"),fe=R("guides"),he=R("guide"),de=R("dragging"),pe=R("display-drag"),e=(oe="scena-guides-",'\n{\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\ncanvas {\n    position: relative;\n}\n.guide-origin {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    top: 0;\n    left: 0;\n    opacity: 0;\n}\n.guides {\n    position: absolute;\n    bottom: 0;\n    right: 0;\n    will-change: transform;\n    z-index: 2000;\n}\n.guide-pos {\n    position: absolute;\n    font-weight: bold;\n    font-size: 12px;\n    color: #f33;\n}\n.horizontal .guide-pos {\n    bottom: 100%;\n    left: 50%;\n    transform: translate(-50%);\n}\n.vertical .guide-pos {\n    left: calc(100% + 2px);\n    top: 50%;\n    transform: translateY(-50%);\n}\n.display-drag {\n    position: absolute;\n    will-change: transform;\n    z-index: 2000;\n    font-weight: bold;\n    font-size: 12px;\n    display: none;\n    left: 20px;\n    top: -20px;\n    color: #f33;\n}\n:host.horizontal .guides {\n    width: 100%;\n    height: 0;\n}\n:host.vertical .guides {\n    height: 100%;\n    width: 0;\n}\n:host.horizontal canvas {\n    cursor: ns-resize;\n}\n:host.vertical canvas {\n    cursor: ew-resize;\n}\n.guide {\n    position: absolute;\n    background: #f33;\n    z-index: 2;\n}\n.guide.dragging:before {\n    position: absolute;\n    content: "";\n    width: 100%;\n    height: 100%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n:host.horizontal .guide {\n    width: 100%;\n    height: 1px;\n    cursor: row-resize;\n}\n:host.vertical .guide {\n    width: 1px;\n    height: 100%;\n    cursor: col-resize;\n}\n.mobile :host.horizontal .guide {\n    transform: scale(1, 2);\n}\n.mobile :host.vertical .guide {\n    transform: scale(2, 1);\n}\n:host.horizontal .guide:before {\n    height: 20px;\n}\n:host.vertical .guide:before {\n    width: 20px;\n}\n.adder {\n    display: none;\n}\n.adder.dragging {\n    display: block;\n}\n'.replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+oe+"$1")+"{"})),ve=M(["className","rulerStyle","snapThreshold","snaps","displayDragPos","cspNonce","dragPosFormat","defaultGuides","showGuides","scrollOptions","guideStyle","guidesOffset","digit","defaultGuidesPos","dragGuideStyle","displayGuidePos","guidePosFormat","guidePosStyle","lockGuides","guidesZoom"],Tt,!0),ge=(se="div",ae=Wt(e=e),ce=ae.className,(e=function(e,t){var n,r,i=e.className,i=void 0===i?"":i,o=(e.cspNonce,function(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}(e,["className","cspNonce"])),s=xt();return n=t,r=function(){return s.current},Ot(function(){null!=n&&n(r())},[],!0),Ot(function(){var t=ae.inject(s.current,{nonce:e.cspNonce});return function(){t.destroy()}},[]),C(se,Ut({ref:s,"data-styled-id":ce,className:"".concat(i," ").concat(ce)},o))})._fr=!0,e),me=function(e){var t=i,n=e;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}function i(t){var g=e.call(this,t)||this;return g.state={guides:[]},g.scrollPos=0,g.managerRef=mt(),g.guideElements=[],g._isFirstMove=!1,g._zoom=1,g._guidesZoom=1,g._observer=null,g.onDragStart=function(t){var e=t.datas,n=t.inputEvent;g._isFirstMove=!0,g.movePos(t),g.props.onDragStart(T(T({},t),{dragElement:e.target})),g.gesto.isFlag()&&(n.stopPropagation(),n.preventDefault(),g._startDragScroll(t))},g._onDrag=function(t){g._isFirstMove&&(g._isFirstMove=!1,n=t.datas.target,e=de,n.classList?n.classList.add(e):n.className+=" "+e);var e,n=g.movePos(t);if(g.props.onDrag(T(T({},t),{dragElement:t.datas.target})),g.gesto.isFlag())return g._dragScroll(t),n;g._endDragScroll(t)},g.onDragEnd=function(t){var e=t.datas,n=t.isDouble,r=t.distX,i=t.distY,o=g.movePos(t),s=g.state.guides,a=g.props,c=a.onChangeGuides,u=a.displayDragPos,l=a.digit,f=a.lockGuides,a=a.guidesOffset,h=g._zoom,o=parseFloat((o/h).toFixed(l||0)),h=g.scrollPos-(a||0);if(u&&(g.displayElement.style.cssText+="display: none;"),l=e.target,a=de,l.classList?l.classList.remove(a):(a=new RegExp("(\\s|^)"+a+"(\\s|$)"),l.className=l.className.replace(a," ")),g.props.onDragEnd(T(T({},t),{dragElement:e.target})),g._endDragScroll(t),e.fromRuler)g._isFirstMove&&g.props.onClickRuler(T(T({},t),{pos:0})),h<=o&&s.indexOf(o)<0&&g.setState({guides:M(M([],s,!0),[o],!1)},function(){c({guides:g.state.guides,distX:r,distY:i,index:s.length,isAdd:!0,isRemove:!1,isChange:!1})});else{var d=parseFloat(e.target.getAttribute("data-index")),p=!1,v=!1,u=(s=M([],s,!0)).indexOf(o);if(n||o<h||-1<u&&u!==d){if(f&&(!0===f||-1<f.indexOf("remove")))return;s.splice(d,1),p=!0}else{if(-1<u)return;if(f&&(!0===f||-1<f.indexOf("change")))return;s[d]=o,v=!0}g.setState({guides:s},function(){var t=g.state.guides;c({distX:r,distY:i,guides:t,isAdd:!1,index:d,isChange:v,isRemove:p})})}},g._onCheck=function(){g.resize()},g.state.guides=t.defaultGuides||[],g.scrollPos=t.defaultGuidesPos||0,g}ie(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r);n=i.prototype;return n.render=function(){var t=this.props,e=t.className,n=t.type,r=t.zoom,i=t.guidesZoom,o=t.style,s=t.rulerStyle,a=t.displayDragPos,c=t.cspNonce,u=t.dragGuideStyle,t=t.guidePosStyle,t=void 0===t?{}:t,l=this.props,f=this.getTranslateName(),h={};return Tt.forEach(function(t){"style"!==t&&"warpSelf"!==t&&"useResizeObserver"!==t&&(h[t]=l[t])}),this._zoom=r,this._guidesZoom=i||r,console.log(n,r,i),C(ge,{ref:this.managerRef,cspNonce:c,className:"".concat(R("manager",n)," ").concat(e),style:o},C("div",{className:R("guide-origin"),ref:d(this,"originElement")}),C(kt,T({ref:d(this,"ruler"),style:s},h)),C("div",{className:fe,ref:d(this,"guidesElement"),style:{transform:"".concat(f,"(").concat(-this.scrollPos*this._guidesZoom,"px)")}},a&&C("div",{className:pe,ref:d(this,"displayElement"),style:t||{}}),C("div",{className:le,ref:d(this,"adderElement"),style:u}),this.renderGuides()))},n.drawRuler=function(t){this.ruler.draw(t)},n.renderGuides=function(){var s=this,t=this.props,a=t.type,e=t.showGuides,c=t.guideStyle,u=t.displayGuidePos,n=t.guidePosStyle,l=void 0===n?{}:n,f=t.guidesOffset,h=this._guidesZoom,d=this.getTranslateName(),n=this.state.guides,p=t.guidePosFormat||t.dragPosFormat||function(t){return t};if(this.guideElements=[],e)return n.map(function(t,e){var n,r,i,o=t+(f||0);return C("div",{className:R("guide",a),ref:(n=s,r="guideElements",function(t){t&&(n[r][i]=t)}),key:i=e,"data-index":e,"data-pos":t,style:T(T({},c),{transform:"".concat(d,"(").concat(o*h,"px) translateZ(0px)")})},u&&C("div",{className:R("guide-pos"),style:l||{}},p(t)))})},n.componentDidMount=function(){var l=this;this.gesto=new Lt(this.managerRef.current,{container:document.body}).on("dragStart",function(t){var e=l.props,n=e.type,e=e.lockGuides,r=l._guidesZoom;if(!0===e)t.stop();else{var i=t.inputEvent.target,o=t.datas,s=l.ruler.canvasElement,a=l.guidesElement,n="horizontal"===n,c=l.originElement.getBoundingClientRect(),u=re(l.managerRef.current),c=ne(u,[t.clientX-c.left,t.clientY-c.top]),a=(c[0]-=a.offsetLeft,c[1]-=a.offsetTop,c[n?1:0]+=l.scrollPos*r,o.offsetPos=c,o.matrix=u,e&&-1<e.indexOf("add")),n=e&&-1<e.indexOf("remove"),r=e&&-1<e.indexOf("change");if(i===s){if(a)return void t.stop();o.fromRuler=!0,o.target=l.adderElement}else{if(c=he,(u=i).classList?!u.classList.contains(c):!u.className.match(new RegExp("(\\s|^)"+c+"(\\s|$)")))return t.stop(),!1;if(n&&r)return void t.stop();o.target=i}l.onDragStart(t)}}).on("drag",this._onDrag).on("dragEnd",this.onDragEnd),this.props.useResizeObserver?(this._observer=new ResizeObserver(this._onCheck),this._observer.observe(this.guidesElement,{box:"border-box"}),this._observer.observe(this.getRulerElement(),{box:"border-box"})):this._onCheck()},n.componentWillUnmount=function(){var t;this.gesto.unset(),null!=(t=this._observer)&&t.disconnect()},n.componentDidUpdate=function(t){var e=this.props.defaultGuides;t.defaultGuides!==e&&this.setState({guides:e||[]})},n.loadGuides=function(t){this.setState({guides:t})},n.getGuides=function(){return this.state.guides},n.scrollGuides=function(n,r){void 0===r&&(r=this._guidesZoom),this._setZoom({guidesZoom:r});var i=this.getTranslateName(),t=this.guidesElement,o=(this.scrollPos=n,t.style.transform="".concat(i,"(").concat(-n*r,"px)"),this.state.guides),s=this.props.guidesOffset||0;this.guideElements.forEach(function(t,e){t&&(e=o[e]+(s||0),t.style.transform="".concat(i,"(").concat(e*r,"px) translateZ(0px)"),t.style.display=-n+e<0?"none":"block")})},n.zoomTo=function(t,e){void 0===e&&(e=t),this.scroll(this.getRulerScrollPos(),t),this.scrollGuides(this.getGuideScrollPos(),e)},n.getElement=function(){return this.managerRef.current},n.getRulerElement=function(){return this.ruler.canvasElement},n.getGuideScrollPos=function(){return this.scrollPos},n.getRulerScrollPos=function(){return this.ruler.getScrollPos()},n.scroll=function(t,e){void 0===e&&(e=this._zoom),this._setZoom({zoom:e}),this.ruler.scroll(t,e)},n.resize=function(t){void 0===t&&(t=this._zoom),this._setZoom({zoom:t}),this.ruler.resize(t)},n.movePos=function(t){var e=t.datas,n=t.distX,t=t.distY,r=this.props,i=r.type,o=r.snaps,s=r.snapThreshold,a=r.displayDragPos,c=r.digit,u=r.guidesOffset||0,l=this._zoom,r=r.dragPosFormat||function(t){return t},f="horizontal"===i,n=ne(e.matrix,[n,t]),t=e.offsetPos,h=n[0]+t[0],n=n[1]+t[1],t=u*l,f=Math.round(f?n:h)-u,d=parseFloat((f/l).toFixed(c||0)),c=o.slice().sort(function(t,e){return Math.abs(d-t)-Math.abs(d-e)});return c.length&&Math.abs(c[0]*l-f)<s&&(f=(d=c[0])*l),e.fromRuler&&this._isFirstMove||(a&&(this.displayElement.style.cssText+="display: block;transform: translate(-50%, -50%) "+"translate(".concat(("horizontal"===i?[h,f+t]:[f+t,n]).map(function(t){return"".concat(t,"px")}).join(", "),")"),this.displayElement.innerHTML="".concat(r(d))),(o=e.target).setAttribute("data-pos",d),o.style.transform="".concat(this.getTranslateName(),"(").concat(f+u*l,"px)")),f},n.getTranslateName=function(){return"horizontal"===this.props.type?"translateY":"translateX"},n._startDragScroll=function(t){var e,n,i=this,r=this.props.scrollOptions;r&&(e=t.datas,n=new jt,(e.dragScroll=n).on("scroll",function(t){var e,n,r=t.container,t=t.direction;null!=(n=(e=i.props).onRequestScroll)&&n.call(e,{container:r,direction:t})}).on("move",function(t){var e=t.offsetX,n=t.offsetY,t=t.inputEvent;i.gesto.scrollBy(e,n,t.inputEvent,!0)}),n.dragStart(t,{container:r.container}))},n._dragScroll=function(t){var e=this.props.scrollOptions;e&&t.datas.dragScroll.drag(t,e)},n._endDragScroll=function(t){var e;null!=(e=t.datas.dragScroll)&&e.dragEnd(),t.datas.dragScroll=null},n._setZoom=function(t){var e=t.zoom,t=t.guidesZoom;this.props.zoom;!!this.props.guidesZoom?t&&(this._guidesZoom=t):(t&&(this._zoom=t,this._guidesZoom=t),e&&(this._guidesZoom=e)),e&&(this._zoom=e)},i.defaultProps={className:"",type:"horizontal",zoom:1,guidesZoom:0,style:{},snapThreshold:5,snaps:[],digit:0,onClickRuler:function(){},onChangeGuides:function(){},onRequestScroll:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},displayDragPos:!1,dragPosFormat:function(t){return t},defaultGuides:[],lockGuides:!1,showGuides:!0,guideStyle:{},dragGuideStyle:{},guidePosStyle:{},defaultGuidesPos:0},i}(gt),_e=ve,ye=["getGuides","loadGuides","scroll","scrollGuides","resize","getElement","getRulerElement","forceUpdate","getRulerScrollPos","getGuideScrollPos","zoomTo","drawRuler"],be=["changeGuides","requestScroll","dragStart","drag","dragEnd","clickRuler"],Ee=function(e){function t(t){t=e.call(this,t)||this;return t.state={},t.state=t.props,t}return n(t,e),t.prototype.render=function(){return C(me,s({ref:d(this,"guides")},this.state))},t}(vt),Se=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(function(o){function t(t,e){void 0===e&&(e={});var n,r=o.call(this)||this,i=(r.containerProvider=null,r.selfElement=null,r._warp=!1,{});return be.forEach(function(e){i["on ".concat(e).replace(/[\s-_]+([^\s-_])/g,function(t,e){return e.toUpperCase()})]=function(t){return r.trigger(e,t)}}),e.warpSelf?(delete e.warpSelf,r._warp=!0,n=t):(n=document.createElement("div"),t.appendChild(n)),r.containerProvider=Ct(C(Ee,s({ref:d(r,"innerGuides")},i,e)),n),r}n(t,o);var e=t.prototype;return e.setState=function(t,e){this.innerGuides.setState(t,e)},e.forceUpdate=function(t){this.innerGuides.forceUpdate(t)},e.destroy=function(){var t,e=this.selfElement;Ct(null,e,this.containerProvider),this._warp||null!=(t=null==e?void 0:e.parentElement)&&t.removeChild(e),this.selfElement=null,this.innerGuides=null},e.getInnerGuides=function(){return this.innerGuides.guides},function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}([F(ye,function(t,r){t[r]||(t[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getInnerGuides();if(n&&n[r])return n[r].apply(n,t)})}),F(_e,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getInnerGuides().props[n]},set:function(t){var e;this.innerGuides.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(t)),we={__proto__:null,default:Se,PROPERTIES:_e,METHODS:ye,EVENTS:be};for(ue in we)Se[ue]=we[ue];return Se});
//# sourceMappingURL=guides.min.js.map
