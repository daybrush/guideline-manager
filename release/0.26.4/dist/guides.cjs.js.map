{"version":3,"file":"guides.cjs.js","sources":["../src/consts.ts","../src/InnerGuides.tsx","../src/GuidesManager.tsx","../src/Guides.tsx","../src/index.cjs.ts"],"sourcesContent":["import {\n    PROPERTIES as GUIDES_PROPERTIES,\n    METHODS as GUIDES_METHODS,\n    EVENTS as GUIDES_EVENTS,\n} from \"@scena/react-guides\";\nimport {\n    GuidesOptions,\n} from \"@scena/react-guides/declaration/types\";\nexport const PROPERTIES: Array<keyof GuidesOptions> = GUIDES_PROPERTIES;\n\nexport const METHODS = GUIDES_METHODS as readonly string[];\n\nexport const EVENTS = GUIDES_EVENTS as readonly string[];\n","import * as React from \"react\";\nimport { ref } from \"framework-utils\";\nimport ReactGuides from \"@scena/react-guides\";\nimport { GuidesOptions } from \"@scena/react-guides/declaration/types\";\n\nexport interface InnerGuidesProps extends GuidesOptions {\n    container?: HTMLElement;\n}\nexport default class InnerGuides extends React.Component<InnerGuidesProps, InnerGuidesProps> {\n    public state: InnerGuidesProps = {};\n    public guides: ReactGuides;\n    constructor(props: InnerGuidesProps) {\n        super(props);\n        this.state = this.props;\n    }\n    public render() {\n        return <ReactGuides ref={ref(this, \"guides\")} {...this.state} />;\n    }\n}\n","import { ref, Properties } from \"framework-utils\";\nimport * as React from \"react\";\nimport { PROPERTIES, METHODS, EVENTS } from \"./consts\";\nimport { GuidesInterface, GuidesEvents, GuidesOptions } from \"@scena/react-guides/declaration/types\";\nimport InnerGuides from \"./InnerGuides\";\nimport EventEmitter from \"@scena/event-emitter\";\nimport { camelize } from \"@daybrush/utils\";\nimport { ContainerProvider, renderSelf } from \"croact\";\n\n@Properties(METHODS as any, (prototype, property) => {\n    if (prototype[property]) {\n        return;\n    }\n    prototype[property] = function(...args) {\n        const self = this.getInnerGuides();\n\n        if (!self || !self[property]) {\n            return;\n        }\n        return self[property](...args);\n    };\n})\n@Properties(PROPERTIES, (prototype, property) => {\n    Object.defineProperty(prototype, property, {\n        get() {\n            return this.getInnerGuides().props[property];\n        },\n        set(value) {\n            this.innerGuides.setState({\n                [property]: value,\n            });\n        },\n        enumerable: true,\n        configurable: true,\n    });\n})\n/**\n * @sort 1\n * @extends EventEmitter\n */\nclass Guides extends EventEmitter<GuidesEvents> {\n    private containerProvider: ContainerProvider | null = null;\n    private selfElement: HTMLElement | null = null;\n    private _warp = false;\n    private innerGuides!: InnerGuides;\n    /**\n     * @sort 1\n     * @param - guides' container\n     * @param {$ts:Partial<Guides.GuidesOptions>} - guides' options\n     */\n    constructor(container: HTMLElement, options: Partial<GuidesOptions> = {}) {\n        super();\n        const events: any = {};\n\n        EVENTS.forEach(name => {\n            events[camelize(`on ${name}`)] = (e: any) => this.trigger(name as any, e);\n        });\n        let selfElement!: HTMLElement;\n\n        if (options.warpSelf) {\n            delete options.warpSelf;\n            this._warp = true;\n            selfElement = container;\n        } else {\n            selfElement = document.createElement(\"div\");\n            container.appendChild(selfElement);\n        }\n        this.containerProvider = renderSelf(\n            <InnerGuides ref={ref(this, \"innerGuides\")}\n                {...events}\n                {...options} />,\n            selfElement,\n        );\n    }\n    /**\n     * @param state\n     * @param callback\n     */\n    public setState(state: Partial<GuidesOptions>, callback?: () => void) {\n        this.innerGuides.setState(state, callback);\n    }\n    /**\n     * @param callback\n     */\n    public forceUpdate(callback?: () => void) {\n        this.innerGuides.forceUpdate(callback);\n    }\n    /**\n     * destroy guides\n     */\n    public destroy() {\n        const selfElement = this.selfElement!;\n\n        renderSelf(\n            null,\n            selfElement!,\n            this.containerProvider,\n        );\n        if (!this._warp) {\n            selfElement?.parentElement?.removeChild(selfElement);\n        }\n        this.selfElement = null;\n        this.innerGuides = null;\n    }\n    private getInnerGuides() {\n        return this.innerGuides.guides;\n    }\n}\ninterface Guides extends GuidesInterface {}\n\nexport default Guides;\n","import GuidesManager from \"./GuidesManager\";\n\nexport default class Guides extends GuidesManager {}\n","import Guides, * as others from \"./index.esm\";\n\nfor (const name in others) {\n    (Guides as any)[name] = others[name];\n}\ndeclare const module: any;\n\nmodule.exports = Guides;\nexport * from \"./index.esm\";\nexport default Guides;\n"],"names":["PROPERTIES","GUIDES_PROPERTIES","METHODS","GUIDES_METHODS","EVENTS","GUIDES_EVENTS","__extends","props","_super","_this","state","React","ReactGuides","ref","container","options","events","forEach","name","camelize","e","trigger","selfElement","warpSelf","_warp","document","createElement","appendChild","containerProvider","renderSelf","InnerGuides","callback","innerGuides","setState","forceUpdate","parentElement","removeChild","guides","Guides","Properties","prototype","property","_i","args","self","getInnerGuides","Object","defineProperty","get","set","value","_a","enumerable","configurable","EventEmitter","GuidesManager","others","module","exports"],"mappings":"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"}